{"version":3,"sources":["webpack:///./src/eBus.js","webpack:///./src/pages/gdMap.vue?6e7e","webpack:///./src/pages/gdMap.vue?c4e2","webpack:///src/pages/gdMap.vue","webpack:///./src/pages/gdMap.vue","webpack:///./src/pages/gdMap.vue?92c6"],"names":["__webpack_exports__","vue__WEBPACK_IMPORTED_MODULE_0___default","a","module","exports","__webpack_require__","push","i","content","locals","add","default","gdMap","clear","val","returnToSuperior","AMapUI","AMap","map","positionResult","start","initMap","Object","remoteLoad","gdMap_vue_styles_","context","gdMap_Component","component_normalizer","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","text","text_disable","_v","text_disable2","prefix","on","fullAddress","fulladdress","model","value","callback","$$v","searchKey","expression","slot","id","click","submit"],"mappings":"8GACAA,EAAA,MAAAC,EAAAC,wBCDAC,EAAAC,QAAAC,EAAA,EAAAA,EAAA,IAKAC,MAAAH,EAAAI,EAAA,smCAA6nC,0BCF7nC,IAAAC,EAAAH,EAAA,KACA,iBAAAG,QAAAL,EAAAI,EAAAC,EAAA,MACAA,EAAAC,SAAAN,EAAAC,QAAAI,EAAAC,SAGAC,EADAL,EAAA,GAAAM,SACA,WAAAH,GAAA,2DCiBAI,gCAIA,aACA,UACA,gBACA,oCAEA,oFAKAC,8CAMAC,oBACAA,oGAWAC,uDAGAC,0BACAC,+EAGA,YAEA,sFAOA,YACA,OAEA,SACAC,QAEA,sIAYAC,qBAFA,MAOAC,8DAkBA,6BACA,yGAKAC,iBAGAC,OAAAC,EAAA,EAAAD,CAEA,4FACA,8CACAD,qBCtHA,IAEAG,EAXA,SAAAC,GACApB,EAAA,MAgBAqB,EAAAJ,OAAAK,EAAA,EAAAL,CACAV,EClBA,WAA0B,IAAAgB,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,UAAoBF,EAAA,OAAYE,YAAA,aAAuBF,EAAA,YAAiBG,OAAOC,KAAAR,EAAAS,gBAAyBT,EAAAU,GAAA,KAAAN,EAAA,YAA6BG,OAAOC,KAAAR,EAAAW,kBAA0B,GAAAX,EAAAU,GAAA,KAAAN,EAAA,cAAmCE,YAAA,cAAAC,OAAiCK,OAAA,aAAqBC,IAAKC,YAAAd,EAAAe,aAA8BC,OAAQC,MAAAjB,EAAA,UAAAkB,SAAA,SAAAC,GAA+CnB,EAAAoB,UAAAD,GAAkBE,WAAA,eAAyBjB,EAAA,KAAUG,OAAOe,KAAA,UAAgBA,KAAA,WAAetB,EAAAU,GAAA,+BAAAV,EAAAU,GAAA,KAAAN,EAAA,OAA8DG,OAAOgB,GAAA,eAAkBvB,EAAAU,GAAA,KAAAN,EAAA,OAAwBG,OAAOgB,GAAA,kBAAqBvB,EAAAU,GAAA,KAAAN,EAAA,OAAwBE,YAAA,WAAqBF,EAAA,aAAkBE,YAAA,aAAAO,IAA6BW,MAAAxB,EAAAyB,UAAoBzB,EAAAU,GAAA,uBDSzxB,EAaAd,EATA,kBAEA,MAYAxB,EAAA,QAAA0B,EAAA","file":"1.build.js","sourcesContent":["import Vue from 'vue';\r\nexport  default new Vue()","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"#js-container[data-v-9da021e2]{width:100%}.adress_text[data-v-9da021e2]{color:#000;text-indent:.5em}.tip_text[data-v-9da021e2]{width:100%;height:37px;padding-top:11px;padding-bottom:11px;padding-left:20px;background:hsla(0,0%,98%,.9);box-shadow:0 0 0 0 #e0e0e0}#js-result[data-v-9da021e2]{width:100%;height:200px;overflow-y:scroll;display:none}.m-map[data-v-9da021e2]{min-width:500px;min-height:300px;position:relative}.m-map .map[data-v-9da021e2]{width:100%;height:100%}.m-map .search[data-v-9da021e2]{position:absolute;top:10px;left:10px;width:285px;z-index:1}.m-map .search input[data-v-9da021e2]{width:180px;border:1px solid #ccc;line-height:20px;padding:5px;outline:none}.m-map .search button[data-v-9da021e2]{line-height:26px;background:#fff;border:1px solid #ccc;width:50px;text-align:center}.m-map .result[data-v-9da021e2]{max-height:300px;overflow:auto;margin-top:10px}.center[data-v-9da021e2]{width:100%;display:flex;align-items:center;justify-content:center;position:fixed;bottom:20px}.center .sub_button[data-v-9da021e2]{background-image:linear-gradient(-135deg,#847ffe,#0484fa);border-radius:100px;height:48px}\", \"\"]);\n\n// exports\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?minimize!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-9da021e2\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../node_modules/sass-loader/lib/loader.js!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./gdMap.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"01ffc8f7\", content, true, {});","<template>\r\n  <div class=\"gdmap\">\r\n    <div class=\"tip_text\">\r\n      <ld-iconP :text=\"text_disable\">\r\n      </ld-iconP>\r\n      <ld-iconP :text=\"text_disable2\">\r\n      </ld-iconP>\r\n    </div>\r\n    <!-- <ld-address v-model=\"searchKey\" @fullAddress=\"fulladdress\" class=\"adress-text\" prefix=\"广东省深圳市南山区\"></ld-address> -->\r\n    <ld-address v-model=\"searchKey\" class=\"adress_text\" prefix=\"广东省深圳市南山区\" @fullAddress=\"fulladdress\">\r\n      <i slot='prefix'>\r\n        广东省深圳市南山区\r\n      </i>\r\n    </ld-address>\r\n    <div id=\"js-result\"></div>\r\n    <div id=\"js-container\">\r\n    </div>\r\n    <div class=\"center\">\r\n      <el-button class=\"sub_button\" @click=\"submit\">确认位置</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport remoteLoad from \"./../libs/remoteLoad.js\";\r\nimport eBus from \"../eBus.js\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      searchKey: \"\",\r\n      mapHeight: \"\",\r\n      adress: \"\",\r\n      text_disable: \"1 在下方输入框输入地址信息以搜索位置\",\r\n      text_disable2: \"2 按住并拖动地图上的定位图标进行位置微调 \"\r\n    };\r\n  },\r\n  watch: {\r\n    searchKey() {\r\n      if (this.searchKey === \"\") {\r\n        this.placeSearch.clear();\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    fulladdress(val) {\r\n      this.adress = val;\r\n      this.handleSearch(val);\r\n    },\r\n    handleSearch() {\r\n      if (this.searchKey) {\r\n        this.placeSearch.search(this.searchKey, (status, result) => {\r\n        });\r\n      }\r\n    },\r\n    submit() {\r\n      // eBus.$emit(\"address\", this.adress);\r\n      // sessionStorage.setItem(\"address\", this.adress);\r\n      this.returnToSuperior();\r\n    },\r\n    initMap() {\r\n      let AMapUI = (this.AMapUI = window.AMapUI);\r\n      let AMap = (this.AMap = window.AMap);\r\n      AMapUI.loadUI([\"misc/PositionPicker\"], PositionPicker => {\r\n        let mapConfig = {\r\n          zoom: 16,\r\n          cityName: \"深圳\"\r\n        };\r\n        // if (this.lat && this.lng) {\r\n        //   mapConfig.center = [this.lng, this.lat];\r\n        // }\r\n        let map = new AMap.Map(\"js-container\", mapConfig);\r\n        AMap.service(\"AMap.PlaceSearch\", () => {\r\n          this.placeSearch = new AMap.PlaceSearch({\r\n            pageSize: 5,\r\n            pageIndex: 1,\r\n            // citylimit: true,\r\n            city: \"深圳\",\r\n            map: map,\r\n            panel: \"js-result\"\r\n          });\r\n        });\r\n         let positionPicker = new PositionPicker({\r\n          mode: 'dragMap', // 设定为拖拽地图模式，可选'dragMap'、'dragMarker'，默认为'dragMap'\r\n          map: map // 依赖地图对象\r\n        })\r\n        // 拖拽完成发送自定义 drag 事件\r\n        positionPicker.on('success', positionResult => {\r\n          // 过滤掉初始化地图后的第一次默认拖放\r\n          if (!this.dragStatus) {\r\n            this.dragStatus = true\r\n          } else {\r\n            sessionStorage.setItem(\"marker\",JSON.stringify(positionResult))\r\n            //  eBus.$emit(\"marker\",JSON.stringify(positionResult))     \r\n          }\r\n        })\r\n        // 启动拖放\r\n        positionPicker.start();\r\n      }); \r\n      // AMap.plugin([\"AMap.ToolBar\"], async function() {\r\n      //   let mapConfig = {\r\n      //     zoom: 16,\r\n      //     cityName: \"深圳\"\r\n      //   };\r\n      //   let map = new AMap.Map(\"js-container\", mapConfig);\r\n      //   map.addControl(\r\n      //     new AMap.ToolBar({\r\n      //       position: \"RB\"\r\n      //     })\r\n      //   );\r\n      // });\r\n    }\r\n  },\r\n  created() {},\r\n  mounted() {\r\n    let mapHeight = window.innerHeight - 60 + \"px\";\r\n    let id = document.getElementById(\"js-container\");\r\n    id.setAttribute(\"style\", `height:${mapHeight}`);\r\n  },\r\n  async beforeMount() {\r\n    if (window.AMap && window.AMapUI) {\r\n      this.initMap();\r\n      // 未载入高德地图API，则先载入API再初始化\r\n    } else {\r\n      await remoteLoad(\r\n        `http://webapi.amap.com/maps?v=1.3&key=91ad0aeac9e4261c2c0f1e07e942a2a4`\r\n      );\r\n      await remoteLoad(\"http://webapi.amap.com/ui/1.0/main.js\");\r\n      this.initMap();\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n#js-container {\r\n  width: 100%;\r\n  // height: 500px;\r\n}\r\n.adress_text {\r\n  color: black;\r\n  text-indent: 0.5em;\r\n}\r\n\r\n.tip_text {\r\n  width: 100%;\r\n  height: 37px;\r\n  padding-top: 11px;\r\n  padding-bottom: 11px;\r\n  padding-left: 20px;\r\n  background: rgba(250, 250, 250, 0.9);\r\n  box-shadow: 0 0 0 0 #e0e0e0;\r\n}\r\n#js-result {\r\n  width: 100%;\r\n  height: 200px;\r\n  overflow-y: scroll;\r\n  display: none;\r\n}\r\n.m-map {\r\n  min-width: 500px;\r\n  min-height: 300px;\r\n  position: relative;\r\n}\r\n.m-map .map {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.m-map .search {\r\n  position: absolute;\r\n  top: 10px;\r\n  left: 10px;\r\n  width: 285px;\r\n  z-index: 1;\r\n}\r\n.m-map .search input {\r\n  width: 180px;\r\n  border: 1px solid #ccc;\r\n  line-height: 20px;\r\n  padding: 5px;\r\n  outline: none;\r\n}\r\n.m-map .search button {\r\n  line-height: 26px;\r\n  background: #fff;\r\n  border: 1px solid #ccc;\r\n  width: 50px;\r\n  text-align: center;\r\n}\r\n.m-map .result {\r\n  max-height: 300px;\r\n  overflow: auto;\r\n  margin-top: 10px;\r\n}\r\n.center {\r\n  width: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  position: fixed;\r\n  bottom: 20px;\r\n  .sub_button {\r\n    background-image: linear-gradient(-135deg, #847ffe 0%, #0484fa 100%);\r\n    border-radius: 100px;\r\n    height: 48px;\r\n  }\r\n}\r\n</style>\r\n\r\n\r\n","function injectStyle (context) {\n  require(\"!!vue-style-loader!css-loader?minimize!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-9da021e2\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!sass-loader!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./gdMap.vue\")\n}\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./gdMap.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./gdMap.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-9da021e2\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./gdMap.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-9da021e2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"gdmap\"},[_c('div',{staticClass:\"tip_text\"},[_c('ld-iconP',{attrs:{\"text\":_vm.text_disable}}),_vm._v(\" \"),_c('ld-iconP',{attrs:{\"text\":_vm.text_disable2}})],1),_vm._v(\" \"),_c('ld-address',{staticClass:\"adress_text\",attrs:{\"prefix\":\"广东省深圳市南山区\"},on:{\"fullAddress\":_vm.fulladdress},model:{value:(_vm.searchKey),callback:function ($$v) {_vm.searchKey=$$v},expression:\"searchKey\"}},[_c('i',{attrs:{\"slot\":\"prefix\"},slot:\"prefix\"},[_vm._v(\"\\n      广东省深圳市南山区\\n    \")])]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"js-result\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"js-container\"}}),_vm._v(\" \"),_c('div',{staticClass:\"center\"},[_c('el-button',{staticClass:\"sub_button\",on:{\"click\":_vm.submit}},[_vm._v(\"确认位置\")])],1)],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }"],"sourceRoot":""}